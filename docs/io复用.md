讲讲 io 复用吧

I/O 复用是一种 I/O 通知机制。应用程序通过 I/O 复用函数向内核注册一组事件，内核通过 I/O 复用函数把其中就绪的事件通知给应用程序。I/O 复用函数本身是阻塞的，它们能提高程序效率的原因在于它们具有同时监听多个 I/O 事件的能力。

I/O 复用使得程序能够同时监听多个文件描述符。I/O 复用虽然能同时监听多个文件描述符，但它本身是阻塞的。并且当多个文件描述符同时就绪时，如果不采取额外的措施，程序就只能按顺序依次处理其中的每一个文件描述符，这使得服务器程序看起来像是串行工作的。如果要实现并发，只能使用多进程或多线程等编程手段。

Linux 下实现 I/O 复用的系统调用主要有 select，poll 和 epoll。

LT 和 ET 模式

对于 LT 工作模式的文件描述符，当 epoll_wait 检测到其上有事件发生并将此事件通知应用程序后，应用程序可以不立即处理该事件。这样，应用程序下一次调用 epoll_wait 时，epoll_wait 还会再次向应用程序通告该事件，直到该事件被处理。对于 ET 工作模式的文件描述符，应用程序必须立即处理该事件，后续 epoll_wait 不会再向应用程序通知该事件。

**三组 I/O 复用函数的比较**